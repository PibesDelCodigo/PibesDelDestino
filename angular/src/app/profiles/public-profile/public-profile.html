// REQUERIMIENTO 1.6: Consultar perfil p√∫blico de otros usuarios.
// Este componente renderiza la vista p√∫blica (solo lectura) de un usuario,
// mostrando sus datos b√°sicos y sus rese√±as.
<div class="container mt-5 mb-5">
  
  <div class="card border-0 shadow-sm mb-4 bg-white profile-header">
    <div class="card-body p-4 d-flex align-items-center flex-column flex-md-row text-center text-md-start">
      
      <div class="me-md-4 mb-3 mb-md-0 position-relative">
         <img src="https://ui-avatars.com/api/?name={{ userName }}&background=4e4376&color=fff&size=128" 
              class="rounded-circle shadow-sm" 
              alt="Avatar"
              style="width: 128px; height: 128px;">
      </div>

      <div class="flex-grow-1">
        <h2 class="fw-bold mb-1">{{ userName }}</h2>
        <p class="text-muted mb-2">
          <i class="fa fa-map-marker-alt text-danger"></i> Viajero de PibesDelDestino
        </p>
        
        <div class="d-flex flex-row flex-wrap justify-content-center justify-content-md-start align-items-center gap-3 mt-3">
          
          <div class="bg-white border rounded-pill px-3 py-2 shadow-sm d-flex align-items-center">
            <i class="fa fa-pencil-alt text-primary me-2"></i> 
            <span class="text-dark fw-bold mb-0">{{ totalReviews }} Rese√±as</span>
          </div>

          <div class="bg-white border rounded-pill px-3 py-2 shadow-sm d-flex align-items-center" *ngIf="totalReviews > 0">
            <i class="fa fa-star text-warning me-2"></i> 
            <span class="text-dark fw-bold mb-0">{{ averageRating | number:'1.1-1' }} Promedio</span>
          </div>

        </div>

      </div>
    </div>
  </div>

  <h4 class="mb-3">Historial de Viajes</h4>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary"></div>
  </div>

  <div *ngIf="!isLoading && experiences.length === 0" class="alert alert-light text-center border">
    Este usuario a√∫n no ha compartido experiencias. üê¢
  </div>

  <div class="row row-cols-1 row-cols-md-2 g-4" *ngIf="!isLoading && experiences.length > 0">
    
    <div class="col" *ngFor="let exp of experiences">
      <div class="card h-100 border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between mb-2">
            <h5 class="card-title fw-bold mb-0 text-primary">{{ exp.title }}</h5>
            <span class="text-warning fw-bold">
              ‚òÖ {{ exp.rating }}
            </span>
          </div>
          
          <p class="card-text text-muted small mb-3">
            {{ exp.date | date:'mediumDate' }}
          </p>
          
          <p class="card-text">{{ exp.description }}</p>

          <a [routerLink]="['/destination-detail', exp.destinationId]" 
             class="btn btn-sm btn-outline-secondary mt-2">
             Ver Destino <i class="fa fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>

  </div>
</div>