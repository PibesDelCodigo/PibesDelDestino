<div class="search-container">
  <h2>Buscar Ciudades y Destinos</h2>

  <form [formGroup]="searchForm" class="filters-grid">
    
    <div class="form-group full-width">
      <label>Nombre de Ciudad:</label>
      <input 
        type="text" 
        formControlName="partialName" 
        placeholder="Ej: Buenos, Paris..." 
        class="search-input"
      />
    </div>

    <div class="form-group">
      <label>CÃ³digo PaÃ­s (ej: AR, US):</label>
      <input 
        type="text" 
        formControlName="countryId" 
        placeholder="AR" 
        class="search-input"
        maxlength="2"
      />
    </div>

    <div class="form-group">
      <label>PoblaciÃ³n MÃ­nima:</label>
      <input 
        type="number" 
        formControlName="minPopulation" 
        placeholder="Ej: 100000" 
        class="search-input"
      />
    </div>

  </form>

  <div *ngIf="isLoading" class="loading-message">â³ Buscando...</div>
  <div *ngIf="errorMessage" class="error-message">âŒ {{ errorMessage }}</div>

  <ul *ngIf="cities.length > 0" class="results-list">
    <li *ngFor="let city of cities" class="result-item">
      
      <div class="city-header">
        <span class="city-name">{{ city.name }}</span>
        <span class="city-region" *ngIf="city.region">{{ city.region }}</span>
      </div>
      
      <div class="city-country">{{ city.country }}</div>
      
      <div class="city-stats">
        ğŸ‘¥ PoblaciÃ³n: {{ city.population | number }}
      </div>
      
      <small>Lat: {{ city.latitude }} | Lon: {{ city.longitude }}</small>

      <div class="d-flex gap-2 mt-2">
        
        <button class="btn btn-success flex-grow-1" (click)="saveCity(city)">
          ğŸ’¾ Guardar
        </button>

        <button class="btn btn-warning flex-grow-1" (click)="rateCity(city)">
          â­ Calificar
        </button>

        <button class="btn btn-outline-danger" (click)="likeCity(city)" title="Me gusta">
          <i class="fa-heart" 
             [ngClass]="likedCities.has(city.name) ? 'fas' : 'far'">
          </i>
        </button>

      </div>
      </li>
  </ul>

  <div *ngIf="!isLoading && cities.length === 0 && searchForm.get('partialName')?.value?.length! > 2" class="no-results">
    No se encontraron ciudades con esos filtros.
  </div>
</div>