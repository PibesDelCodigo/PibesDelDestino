<div class="row mb-3">
  <div class="col-xl-6 col-12 d-flex">
    <div class="card h-lg-100 w-100 overflow-hidden">
      <div class="card-body">
        <div class="starting-content pe-5">
          @if(!hasLoggedIn){
          <h3>Welcome</h3>
          <p class="lead text-muted mb-2">
            {{ '::LongWelcomeMessage' | abpLocalization }}
          </p>
          <a (click)="login()" class="px-4 btn btn-primary mb-4" role="button">
            <i class="fa fa-sign-in"></i>
            {{ 'AbpAccount::Login' | abpLocalization }}
          </a>
          }

<div class="p-5 mb-4 bg-light rounded-3 text-center">
  <h1 class="display-5 fw-bold">Pibes del Destino üåç</h1>
  <p class="fs-4">Descubr√≠ las mejores ciudades del mundo seg√∫n viajeros como vos.</p>
  
  <button *ngIf="!hasLoggedIn" class="btn btn-primary btn-lg mt-3" (click)="login()">
      <i class="fa fa-sign-in-alt"></i> Iniciar Sesi√≥n para Calificar
  </button>
</div>

<div class="container mb-5">
    
    <h2 class="text-center mb-4">
        <span class="text-warning">‚≠ê</span> Destinos M√°s Populares
    </h2>

    <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
    </div>

    <div *ngIf="!isLoading && topDestinations.length === 0" class="text-center text-muted py-5">
        <i class="fa fa-map-signs fa-3x mb-3 text-secondary"></i>
        <p>A√∫n no hay destinos calificados. ¬°S√© el primero en votar!</p>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4" *ngIf="!isLoading && topDestinations.length > 0">
        
        <div class="col" *ngFor="let dest of topDestinations; let i = index">
            <div class="card h-100 shadow-sm border-0 hover-card">
                
                <div *ngIf="i < 3" class="position-absolute top-0 start-0 bg-warning text-dark px-3 py-1 rounded-end fw-bold z-1 shadow-sm">
                    #{{ i + 1 }} üèÜ
                </div>

                <img [src]="dest.photo || 'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=600&auto=format&fit=crop'" 
                     class="card-img-top" 
                     alt="{{ dest.name }}"
                     style="height: 200px; object-fit: cover;">

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold">{{ dest.name }}</h5>
                    <p class="card-text text-muted mb-1">
                        <i class="fa fa-map-marker-alt text-danger"></i> {{ dest.country }}
                    </p>
                    
                    <div class="text-warning mb-3" style="font-size: 1.2rem;">
                        <span *ngFor="let s of [1,2,3,4,5]">
                             <i [class]="s <= (dest.averageRating || 0) ? 'fas fa-star' : 'far fa-star'"></i>
                        </span>
                        <span class="text-dark ms-2 small fw-bold">
                            {{ (dest.averageRating || 0) | number:'1.1-1' }}
                        </span>
                    </div>

                    <button class="btn btn-outline-primary w-100 mt-auto" (click)="goToDetail(dest.id)">
                        Ver Rese√±as
                    </button>
                </div>
            </div>
        </div>

    </div>
</div>

